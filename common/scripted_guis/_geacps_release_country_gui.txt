scripted_gui = {

	project_F_kikan_btn = {#表示ボタン
		window_name = "project_F_kikan_btn" 
		context_type = player_context 
		visible = { 
		}
		effects = {
			pfk_open_btn_click = {

				if = {
					limit = { has_country_flag = pfk_on }
					clr_country_flag = pfk_on
				}
				else = {
					set_country_flag = pfk_on
					clear_array = ROOT.pfk_array
					for_each_loop = {#陣営ごとに
						array = global.pfk_country_array
						value = country_tag
						index = index_num
						add_to_array = { ROOT.pfk_array = country_tag }
					}
				}
			}
		}
		properties = {
		}
		triggers = {	#ボタンを実行できる条件?
		}
	}
	project_F_kikan_GUI = {#
		window_name = "project_F_kikan_GUI" 
		context_type = player_context 
		visible = { 
			is_ai = no
			has_country_flag = pfk_on
		}
		effects = {
			#デバック
			pfk_open_btn_0_click = {#リセット
				pfk_first_setting = yes
				for_each_scope_loop = {#陣営ごとに
					array = global.countries
					clear_array = pfk_country_array
				}
				clear_array = global.pfk_country_array
				clear_array = ROOT.pfk_array
				clear_array = ROOT.pfk_current_country_list
				clear_variable = ROOT.pfk_current_target
				set_pfk_country_arraies = yes
				
				for_each_loop = {#陣営ごとに
					array = global.pfk_country_array
					value = country_tag
					index = index_num
					add_to_array = { ROOT.pfk_array = country_tag }
				}
			}
			pfk_open_btn_1_click = {#一つ戻る
				clear_array = ROOT.pfk_array
				remove_from_array = {
					array = ROOT.pfk_current_country_list
					index = 0
				}
				set_temp_variable = { current_scope = ROOT.pfk_current_country_list^0 }
				if = {
					limit = { has_variable = ROOT.pfk_current_country_list^0 }
					var:current_scope = {
						for_each_loop = {
							array = pfk_country_array
							value = country_tag
							index = index_num
							add_to_array = { ROOT.pfk_array = country_tag }
						}
					}
					set_variable = { ROOT.pfk_current_target = current_scope }
				}
				else = {
					for_each_loop = {
						array = global.pfk_country_array
						value = country_tag
						index = index_num
						add_to_array = { ROOT.pfk_array = country_tag }
					}
					set_variable = { ROOT.pfk_current_target = ROOT }
				}
				
			}
			pfk_open_btn_2_click = {
				
			}
			pfk_open_btn_3_click = {
				
			}
			pfk_open_btn_4_click = {
				
			}
			pfk_selected_btn_click = {
				log = "現在:[?THIS.GetName]"

				if = {#国家選択
					limit = { check_variable = { ROOT.fk_setting_progress = 0 } }
					if = {
						limit = {
							has_variable = pfk_country_array^0
							NOT = { check_variable = { ROOT.pfk_current_country_list^0 = THIS } }
						}
						clear_array = ROOT.pfk_array
						add_to_array = {
							array = ROOT.pfk_current_country_list
							value = v
							index = 0
						}
						for_each_loop = {#陣営ごとに
							array = pfk_country_array
							value = country_tag
							index = index_num
							add_to_array = { ROOT.pfk_array = country_tag }
						}				
					}
					set_variable = { ROOT.pfk_current_target = v }
				}
				else_if = {#自治度選択
					limit = { check_variable = { ROOT.fk_setting_progress = 1 } }
					set_variable = { ROOT.pfk_current_target = v }
				}
			}
			pfk_set_btn_click = {
				if = {
					limit = {
						check_variable = { ROOT.fk_setting_progress = 0 }
						has_variable = ROOT.pfk_current_target
					}
					set_variable = { ROOT.fk_setting_progress = 1 }
					set_variable = { ROOT.pfk_setting_list^0 = ROOT.pfk_current_target }
					clear_array = ROOT.pfk_array
					clear_variable = ROOT.pfk_current_target
					for_each_loop = {#陣営ごとに
						array = pfk_autonomy_list
						value = value_id
						index = index_num
						add_to_array = { ROOT.pfk_array = value_id }
					}	
				}
				else_if = {#メゾットを設定
					limit = {
						check_variable = { ROOT.fk_setting_progress = 1 }
						has_variable = ROOT.pfk_current_target
					}
					set_variable = { ROOT.pfk_setting_list^1 = ROOT.pfk_current_target }#傀儡レベルを固定
					clear_array = ROOT.pfk_array
					add_ideas = var:pfk_current_target
					remove_ideas =  var:pfk_current_target
					clear_variable = ROOT.pfk_current_target
					
				}
				else_if = {#国名を設定
					limit = {
						check_variable = { ROOT.fk_setting_progress = 2 }
						has_variable = ROOT.pfk_current_target
					}
					clear_array = ROOT.pfk_array
					add_ideas = var:pfk_current_target
					remove_ideas =  var:pfk_current_target
					clear_variable = ROOT.pfk_current_target
					set_variable = { ROOT.fk_setting_progress = 3 }
				}
			}
		}
		triggers = {
			pfk_selected_btn_click_enabled = {
				# has_variable = pfk_country_array^0
				# NOT = {
				# 	any_of_scopes = {
				# 		array = pfk_state_array_1
				# 		value = v
				# 		index = i
				# 		OR = {
				# 			is_core_of = ROOT
				# 			is_claimed_by = ROOT
				# 		}
				# 	}
				# }
			}
			pfk_open_btn_1_click_enabled = {
				has_variable = ROOT.pfk_current_country_list^0
			}
			pfk_star_icon_visible = {
				# has_variable = pfk_country_array^0
				any_of_scopes = {
					array = pfk_state_array_1
					is_owned_by = ROOT
				}
			}
		}
		properties = {

		}
		dynamic_lists = {
			pfk_country_list_gridbox = {
				array = ROOT.pfk_array
				change_scope = yes
				entry_container = pfk_target_country_container
			}
			pfk_current_country_list_gridbox = {
				array = ROOT.pfk_current_country_list
				change_scope = yes
				entry_container = pfk_current_country_list_container	
			}			
		}
	}

}
